name = "dc-chunking-spike"
main = "src/index.ts"
compatibility_date = "2025-01-29"
compatibility_flags = ["nodejs_compat"]

# Use the same D1 database as dc-api (spike creates its own tables)
[[d1_databases]]
binding = "DB"
database_name = "dc-main"
database_id = "da753071-4176-4efa-9b7f-4f744b8e1aa2"
migrations_dir = "migrations"

# Workers AI for embeddings
[ai]
binding = "AI"

# Vectorize index â€” requires API token with Vectorize scope.
# Provision: npx wrangler vectorize create dc-chunking-spike --dimensions=384 --metric=cosine
# Then uncomment:
# [[vectorize]]
# binding = "VECTORIZE"
# index_name = "dc-chunking-spike"
